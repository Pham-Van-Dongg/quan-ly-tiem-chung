<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card p-4 shadow">
        <h3 class="text-center mb-4">Đăng Ký</h3>

        <!-- Hiển thị thông báo -->
        @if (successMessage) {
        <div class="alert alert-success" role="alert">
          {{ successMessage }}
        </div>
        } @if (errorMessage) {
        <div class="alert alert-danger" role="alert">
          {{ errorMessage }}
        </div>
        }

        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
          <!-- Tên đăng nhập -->
          <div class="mb-3">
            <label for="reg-username" class="form-label">Tên đăng nhập</label>
            <input
              type="text"
              class="form-control"
              id="reg-username"
              formControlName="tenDangNhap"
              [ngClass]="{
                'is-invalid': submitted && username?.invalid
              }"
            />
            @if (submitted && username?.invalid) {
            <div class="invalid-feedback">
              @if (username?.errors?.['required']) {
              <div>Tên đăng nhập không được để trống.</div>
              } @if (username?.errors?.['minlength']) {
              <div>Tên đăng nhập phải có ít nhất 3 ký tự.</div>
              }
            </div>
            }
          </div>

          <!-- Mật khẩu -->
          <div class="mb-3">
            <label for="reg-password" class="form-label">Mật khẩu</label>
            <input
              type="password"
              class="form-control"
              id="reg-password"
              formControlName="matKhau"
              [ngClass]="{
                'is-invalid': submitted && password?.invalid
              }"
            />
            @if (submitted && password?.invalid) {
            <div class="invalid-feedback">
              @if (password?.errors?.['required']) {
              <div>Mật khẩu không được để trống.</div>
              } @if (password?.errors?.['pattern']) {
              <div>Mật khẩu phải có ít nhất 6 ký tự, bao gồm chữ và số.</div>
              }
            </div>
            }
          </div>

          <!-- Xác nhận mật khẩu -->
          <div class="mb-3">
            <label for="confirm-password" class="form-label"
              >Xác nhận mật khẩu</label
            >
            <input
              type="password"
              class="form-control"
              id="confirm-password"
              formControlName="confirmPassword"
              [ngClass]="{
                'is-invalid': submitted && confirmPassword?.invalid
              }"
            />
            @if (submitted && confirmPassword?.invalid) {
            <div class="invalid-feedback">
              @if (confirmPassword?.errors?.['required']) {
              <div>Xác nhận mật khẩu không được để trống.</div>
              } @if (confirmPassword?.errors?.['mustMatch']) {
              <div>Mật khẩu xác nhận không khớp.</div>
              }
            </div>
            }
          </div>

          <!-- Họ tên -->
          <div class="mb-3">
            <label for="hoTen" class="form-label">Họ tên</label>
            <input
              type="text"
              class="form-control"
              id="hoTen"
              formControlName="hoTen"
              [ngClass]="{
                'is-invalid': submitted && hoTen?.invalid
              }"
            />
            @if (submitted && hoTen?.invalid) {
            <div class="invalid-feedback">
              <div>Họ tên không được để trống.</div>
            </div>
            }
          </div>

          <!-- Ngày sinh -->
          <div class="mb-3">
            <label for="ngaySinh" class="form-label">Ngày sinh</label>
            <input
              type="date"
              id="ngaySinh"
              class="form-control"
              formControlName="ngaySinh"
              [ngClass]="{
                'is-invalid': submitted && ngaySinh?.invalid
              }"
            />
            @if (submitted && ngaySinh?.invalid) {
            <div class="invalid-feedback">
              <div>Ngày sinh không được để trống.</div>
            </div>
            }
          </div>

          <!-- Giới tính -->
          <div class="mb-3">
            <label for="gioiTinh" class="form-label">Giới tính</label>
            <select
              id="gioiTinh"
              class="form-select"
              formControlName="gioiTinh"
              [ngClass]="{
                'is-invalid': submitted && gioiTinh?.invalid
              }"
            >
              <option value="" disabled>Chọn giới tính</option>
              <option value="Nam">Nam</option>
              <option value="Nữ">Nữ</option>
            </select>
            @if (submitted && gioiTinh?.invalid) {
            <div class="invalid-feedback">
              <div>Giới tính không được để trống.</div>
            </div>
            }
          </div>

          <!-- CMND/CCCD -->
          <div class="mb-3">
            <label for="cmndCccd" class="form-label">CMND/CCCD</label>
            <input
              type="text"
              id="cmndCccd"
              class="form-control"
              formControlName="cmndCccd"
              [ngClass]="{
                'is-invalid': submitted && cmndCccd?.invalid
              }"
            />
            @if (submitted && cmndCccd?.invalid) {
            <div class="invalid-feedback">
              @if (cmndCccd?.errors?.['required']) {
              <div>CMND/CCCD không được để trống.</div>
              } @if (cmndCccd?.errors?.['pattern']) {
              <div>CMND/CCCD phải có 9-12 chữ số.</div>
              }
            </div>
            }
          </div>

          <!-- Địa chỉ -->
          <div class="mb-3">
            <label for="diaChi" class="form-label">Địa chỉ</label>
            <input
              type="text"
              id="diaChi"
              class="form-control"
              formControlName="diaChi"
              [ngClass]="{
                'is-invalid': submitted && diaChi?.invalid
              }"
            />
            @if (submitted && diaChi?.invalid) {
            <div class="invalid-feedback">
              <div>Địa chỉ không được để trống.</div>
            </div>
            }
          </div>

          <!-- Số điện thoại -->
          <div class="mb-3">
            <label for="soDienThoai" class="form-label">Số điện thoại</label>
            <input
              type="text"
              id="soDienThoai"
              class="form-control"
              formControlName="soDienThoai"
              [ngClass]="{
                'is-invalid': submitted && soDienThoai?.invalid
              }"
            />
            @if (submitted && soDienThoai?.invalid) {
            <div class="invalid-feedback">
              @if (soDienThoai?.errors?.['required']) {
              <div>Số điện thoại không được để trống.</div>
              } @if (soDienThoai?.errors?.['pattern']) {
              <div>Số điện thoại phải có 10-11 chữ số.</div>
              }
            </div>
            }
          </div>

          <!-- Submit Button -->
          <button
            type="submit"
            class="btn btn-success w-100"
            [disabled]="registerForm.invalid && submitted"
          >
            Đăng Ký
          </button>
        </form>

        <p class="mt-3 text-center">
          Đã có tài khoản? <a routerLink="/login">Đăng nhập</a>
        </p>
      </div>
    </div>
  </div>
</div>
